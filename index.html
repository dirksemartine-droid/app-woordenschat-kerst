<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8">
  <title>Kerst woordenschat â€“ luister en kies</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      margin: 0;
      padding: 1.5rem;
      background: #f5f7fb;
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
    }
    h1 {
      text-align: center;
      margin-bottom: 0.5rem;
    }
    .subtitle {
      text-align: center;
      margin-bottom: 1.5rem;
      color: #555;
    }
    .card {
      background: white;
      padding: 1.5rem;
      border-radius: 1rem;
      box-shadow: 0 4px 12px rgba(0,0,0,0.08);
      max-width: 700px;
      width: 100%;
    }
    .controls {
      display: flex;
      flex-wrap: wrap;
      gap: 0.75rem;
      justify-content: center;
      margin-bottom: 1rem;
    }
    button {
      border: none;
      border-radius: 999px;
      padding: 0.75rem 1.25rem;
      font-size: 1rem;
      cursor: pointer;
      background: #0b7dda;
      color: white;
      font-weight: 600;
      box-shadow: 0 2px 6px rgba(0,0,0,0.15);
    }
    button.secondary {
      background: #e0e4f2;
      color: #222;
    }
    button:active {
      transform: scale(0.97);
    }
    .options {
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 1rem;
      margin-top: 1rem;
    }
    .option {
      background: #f0f3ff;
      border-radius: 1rem;
      padding: 0.75rem;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      border: 3px solid transparent;
      transition: transform 0.1s, border-color 0.1s, box-shadow 0.1s;
      min-height: 140px;
    }
    .option img {
      max-width: 100%;
      max-height: 120px;
      object-fit: contain;
      display: block;
    }
    .option.correct {
      border-color: #2ecc71;
      box-shadow: 0 0 0 3px rgba(46,204,113,0.3);
    }
    .option.wrong {
      border-color: #e74c3c;
      box-shadow: 0 0 0 3px rgba(231,76,60,0.3);
    }
    .feedback {
      margin-top: 1rem;
      text-align: center;
      font-size: 1.1rem;
      min-height: 1.4em;
      font-weight: 600;
    }
    .feedback.ok {
      color: #2ecc71;
    }
    .feedback.nok {
      color: #e74c3c;
    }
    @media (max-width: 600px) {
      .options {
        grid-template-columns: repeat(2, minmax(0, 1fr));
      }
    }
  </style>
</head>
<body>
  <h1>Kerstwoordenschat</h1>
  <p class="subtitle">Luister goed en tik op het juiste plaatje.</p>

  <div class="card">
    <div class="controls">
      <button id="playWordBtn">ðŸ”Š Speel woord</button>
      <button id="newWordBtn" class="secondary">âœ¨ Nieuw woord</button>
    </div>

    <div class="options" id="optionsContainer"></div>
    <div class="feedback" id="feedback"></div>
  </div>

  <script>
    const words = [
      { label: "het cadeau", img: "images/0a30fe13-d9bb-4a52-abf8-a701f1e09ef3.png" },
      { label: "de arreslee", img: "images/de_arreslee.png" },
      { label: "de haard", img: "images/de_haard.png" },
      { label: "de kaars", img: "images/de_kaars.png" },
      { label: "de kerstbal", img: "images/de_kerstbal.png" },
      { label: "de kerstboom", img: "images/de_kerstboom.png" },
      { label: "de kerstlampjes", img: "images/de_kerstlampjes.png" },
      { label: "de kerstman", img: "images/de_kerstman.png" },
      { label: "de krans", img: "images/de_krans.png" },
      { label: "de ster", img: "images/de_ster.png" },
      { label: "de strik", img: "images/de_strik.png" }
    ];

    let currentWord = null;
    let options = [];
    const optionsContainer = document.getElementById("optionsContainer");
    const feedbackEl = document.getElementById("feedback");
    const playWordBtn = document.getElementById("playWordBtn");
    const newWordBtn = document.getElementById("newWordBtn");

    function shuffle(array) {
      const arr = array.slice();
      for (let i = arr.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [arr[i], arr[j]] = [arr[j], arr[i]];
      }
      return arr;
    }

    function pickNewQuestion() {
      feedbackEl.textContent = "";
      feedbackEl.className = "feedback";

      currentWord = words[Math.floor(Math.random() * words.length)];

      const others = words.filter(w => w !== currentWord);
      const distractors = shuffle(others).slice(0, 2);
      options = shuffle([currentWord, ...distractors]);

      renderOptions();
    }

    function renderOptions() {
      optionsContainer.innerHTML = "";
      options.forEach(option => {
        const div = document.createElement("div");
        div.className = "option";
        const img = document.createElement("img");
        img.src = option.img;
        img.alt = option.label;
        div.appendChild(img);
        div.addEventListener("click", () => handleAnswer(div, option));
        optionsContainer.appendChild(div);
      });
    }

    function handleAnswer(element, option) {
      document.querySelectorAll(".option").forEach(opt => {
        opt.classList.remove("correct", "wrong");
      });

      if (!currentWord) return;

      if (option.label === currentWord.label) {
        element.classList.add("correct");
        feedbackEl.textContent = "Goed gedaan! âœ…";
        feedbackEl.className = "feedback ok";
      } else {
        element.classList.add("wrong");
        feedbackEl.textContent = "Dat is niet goed. Probeer het nog eens. âŒ";
        feedbackEl.className = "feedback nok";
      }
    }

    function speakWord() {
      if (!currentWord) return;
      const utterance = new SpeechSynthesisUtterance(currentWord.label);
      utterance.lang = "nl-NL";
      const voices = window.speechSynthesis.getVoices();
      const dutchVoice = voices.find(v => v.lang && v.lang.startsWith("nl"));
      if (dutchVoice) utterance.voice = dutchVoice;
      window.speechSynthesis.cancel();
      window.speechSynthesis.speak(utterance);
    }

    playWordBtn.addEventListener("click", speakWord);
    newWordBtn.addEventListener("click", () => {
      pickNewQuestion();
      setTimeout(speakWord, 400);
    });

    window.speechSynthesis.onvoiceschanged = () => {};

    pickNewQuestion();
  </script>
</body>
</html>
